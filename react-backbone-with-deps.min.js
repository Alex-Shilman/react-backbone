/*!
 * https://github.com/jhudson8/react-backbone;  MIT license; Joe Hudson<joehud_AT_gmail.com>
 */
!function(e){"function"==typeof define&&define.amd?define([],function(){return e}):"undefined"!=typeof exports&&"undefined"!=typeof require?module.exports=e:e(React,Backbone,_,$)}(function(React,Backbone,_,$){!function(){function e(e,t){var n=e._eventForwarders=e._eventForwarders||{};return n[t]||(n[t]={}),n[t]}function t(t,a,i){var r=e(a,i);t=t||"_all";var o=r[t];return o||(o=function(e){var t=e._forwardTo=e._forwardTo||[];t.push(n(e.method,i,e.options||{},!0))},r[t]=o),o}function n(e,t,n,a){function i(e){a||d||(d=!0,h.removeLoadEntry(),e=e||"halt",h.triggerAll("complete",e))}function o(e){function t(){if(!d)try{var t=Array.prototype.slice.call(arguments,0,3),n=v[e];n&&n.apply(h,t),t.splice(0,0,e),t.push(h),h.triggerAll.apply(h,t)}finally{i(e)}}h._handler[e]=t,n[e]=function(n,a,i){if(!h._defaultPrevented){if(h.triggerAll("after-send",n,a,i,e),h._defaultPrevented)return;h.data&&(n=h.data||n),t(n,a,i)}}}var d,f=n.event||e,h=new u(e,t,n),p=r+":"+f,v={success:n.success,error:n.error};if(h._handler.complete=i,a||(o(s),o(l)),t.trigger(r,h,f),t.trigger(p,h),!a){c.trigger(r,h,f),c.trigger(p,h);var m=n.beforeSend;n.beforeSend=function(e,t){if(h.xhr=e,h.xhrSettings=t,m){var n=m.call(this,e,t);if(n===!1)return n}return h.triggerAll("before-send",e,t),h._defaultPrevented?!1:void h.pushLoadActivity()}}return h}var a=Backbone.xhrCompleteEventName=Backbone.xhrCompleteEventName||"xhr:complete",i=Backbone.xhrModelLoadingAttribute=Backbone.xhrModelLoadingAttribute||"xhrActivity",r=Backbone.xhrEventName=Backbone.xhrEventName||"xhr",o=Backbone.xhrGlobalAttribute=Backbone.xhrGlobalAttribute||"xhrEvents",c=Backbone[o]=_.extend({},Backbone.Events),s="success",l="error",u=function(e,t,n){this.method=e,this.model=t,this.options=n,this._handler={}};_.extend(u.prototype,{abort:function(){this.aborted||(this.aborted=!0,this.type="abort",this.triggerAll("abort"),this.xhr&&this.xhr.abort())},preventDefault:function(){return this._defaultPrevented=!0,this._handler},triggerAll:function(){var e=_.toArray(arguments);e.push(this),this.trigger.apply(this,e),_.each(this._forwardTo,function(t){e.splice(e.length-1,1,t),t.triggerAll.apply(t,e)})},pushLoadActivity:function(){var e=this.model,t=e[i]=e[i]||[];t.push(this),_.each(this._forwardTo,function(e){e.pushLoadActivity()})},removeLoadEntry:function(){function e(e){var t=e.model,n=t[i]||[],r=n.indexOf(e);r>=0&&n.splice(r,1),0===n.length&&(t[i]=void 0,t.trigger(a,e))}e(this),_.each(this._forwardTo,e)}},Backbone.Events);var d=Backbone.sync;Backbone.sync=function(e,t,a){a=a||{};var i=n(e,t,a);if(!i._defaultPrevented){var r=d.call(this,e,t,a);return i.xhr=r,r}},c.on(r+":read",function(e){var t=e.model;e.on(s,function(){t.hasBeenFetched=!0,t.hadFetchError=!1}),e.on(l,function(){t.hadFetchError=!0})}),Backbone.Model.prototype.ensureFetched=Backbone.Collection.prototype.ensureFetched=function(e,t){function n(){e&&e(a)}var a=this;if(this.hasBeenFetched)return n();var r=_.find(this[i],function(e){return"read"===e.method});r?(r.on("success",n),t&&r.on("error",t)):this.fetch({success:n,error:t})},Backbone.forwardXHREvents=function(e,n,a){var i=t(!_.isFunction(a)&&a,e,n);if(_.isFunction(a))try{e.on(r,i,n),a.call(this)}finally{Backbone.stopXHRForwarding(e,n)}else{var o=a?r+":"+a:r;e.on(o,i,n)}},Backbone.stopXHRForwarding=function(t,n,a){a=a||"_all";var i=e(t,n),o=i[a];o&&(delete i[a],t.off(r,o,n));var c=0;_.each(i,function(){c++}),c||(delete t._eventForwarders[n],_.each(t._eventForwarders,function(){c++}),c||delete t._eventForwarders)},_.each({reset:Backbone.Collection,clear:Backbone.Model},function(e,t){var n=e.prototype[t];e.prototype[t]=function(e){("clear"===t||_.isUndefined(e))&&(this.hasBeenFetched=this.hadFetchError=!1),n.apply(this,arguments)}})}(),function(){function setState(e,t){if(t.isMounted())t.setState(e);else if(t.state)for(var n in e)e.hasOwnProperty(n)&&(t.state[n]=e[n]);else{var a=t.__temporary_state||{};for(var n in e)e.hasOwnProperty(n)&&(a[n]=e[n]);t.__temporary_state=a}}function getState(e,t){var n=t.state,a=t.__temporary_state;return n&&n[e]||a&&a[e]}function get(values,index,initiatedOnce,rtn){function addTo(name){var indexName=name,match=name.match(/^([^\(]*)\s*\(([^\)]*)\)\s*/),params=match&&match[2];if(name=match&&match[1]||name,!index[indexName]){params&&(params=eval("["+params+"]"));var mixin=_mixins[name],checkAgain=!1,skip=!1;if(!mixin)throw new Error('invalid mixin "'+name+'"');if("function"==typeof mixin)_initiatedOnce[name]?(initiatedOnce[name]?skip=!0:(initiatedOnce[name]=[],mixin=name),params&&initiatedOnce[name].push(params)):(mixin=mixin.apply(this,params||[]),checkAgain=!0);else if(params)throw new Error('the mixin "'+name+'" does not support parameters');get(_dependsOn[name],index,initiatedOnce,rtn),get(_dependsInjected[name],index,initiatedOnce,rtn),index[indexName]=!0,checkAgain?get([mixin],index,initiatedOnce,rtn):skip||(checkForInlineMixins(mixin,rtn),rtn.push(mixin))}}function checkForInlineMixins(e,t){e.mixins&&get(e.mixins,index,initiatedOnce,t)}function handleMixin(e){e&&(Array.isArray(e)?get(e,index,initiatedOnce,rtn):"string"==typeof e?addTo(e):(checkForInlineMixins(e,rtn),rtn.push(e)))}if(Array.isArray(values))for(var i=0;i<values.length;i++)handleMixin(values[i]);else handleMixin(values)}function applyInitiatedOnceArgs(e,t){function n(e,n,a){n=n.call(this,a||[]);var i=t.indexOf(e);t.splice(i,1,n)}for(var a in e)e.hasOwnProperty(a)&&n(a,_mixins[a],e[a])}function addMixin(e,t,n,a){function i(e){_mixins[e]=t,_dependsOn[e]=n.length&&n,_initiatedOnce[e]=a&&!0}i(e);var r=e.match(namespaceMatch);r&&!_mixins[r[1]]&&i(r[1])}function GROUP(){}function mixinParams(e){var t,n=e[0],a=!1;if("object"==typeof n?(t=n.name,a=n.initiatedOnce):t=n,!t||!t.length)throw new Error("the mixin name hasn't been specified");return Array.isArray(e[1])?[t,e[1][0],Array.prototype.slice.call(e[1],1),a]:[t,e[1],Array.prototype.slice.call(e,2),a]}function load(){React.mixins.defaultDeferUpdateInterval=0;var e=999999999;React.mixins.add({name:"deferUpdate",initiatedOnce:!0},function(t){function n(e){var t=e.state._deferUpdateTimer;t&&(clearTimeout(t),delete e.state._deferUpdateTimer)}for(var a=e,i=0;i<t.length;i++)t[i].length>0&&(a=Math.min(a,t[i]));return a===e&&(a=React.mixins.defaultDeferUpdateInterval),{getInitialState:function(){return{}},shouldComponentUpdate:function(){return this.state._deferUpdateTimer&&a>0?!1:!0},componentDidUpdate:function(){n(this)},deferUpdate:function(){if(0>a)return this.forceUpdate();var e=this.state,t=this;n(this),e._deferUpdateTimer=setTimeout(function(){n(t),t.isMounted()&&t.forceUpdate()},a)}}}),React.mixins.add("state",{getInitialState:function(){return{}},componentWillMount:function(){var e=this.__temporary_state;if(e){for(var t in e)e.hasOwnProperty(t)&&(this.state[t]=e[t]);delete this.__temporary_state}}}),React.mixins.setState=setState,React.mixins.getState=getState}var _dependsOn,_dependsInjected,_mixins,_initiatedOnce,_createClass=React.createClass;React.createClass=function(e){return e.mixins&&(e.mixins=React.mixins.get(e.mixins)),_createClass.apply(React,arguments)};var namespaceMatch=/^[^\.]+\.(.*)/;React.mixins={get:function(){var e,t,n=[],a={},i={};get(Array.prototype.slice.call(arguments),a,i,n),applyInitiatedOnceArgs(i,n);for(var r=0;r<n.length;r++)if(n[r].mixins){e=n[r],t={};for(var o in e)e.hasOwnProperty(o)&&"mixins"!==o&&(t[o]=e[o]);n[r]=t}return n},inject:function(e){var t=_dependsInjected[e];t||(t=_dependsInjected[e]=[]),t.push(Array.prototype.slice.call(arguments,1))},alias:function(e){addMixin(e,GROUP,Array.prototype.slice.call(arguments,1),!1)},add:function(){addMixin.apply(this,mixinParams(arguments))},exists:function(e){return _mixins[e]||!1},_reset:function(){_dependsOn={},_mixins={},_dependsInjected={},_initiatedOnce={},load()}},React.mixins._reset()}(),function(){function normalizeEvents(e,t,n){t=t||{},n?n+=":":n="";var a,i;for(var r in e)e.hasOwnProperty(r)&&(a=e[r],i=typeof a,"string"===i||"function"===i?t[n+r]=a:a&&normalizeEvents(a,t,n+r));return t}function manageEvent(e,t){var n={type:e};for(var a in t)t.hasOwnProperty(a)&&(n[a]=t[a]);var i=React.mixins.getState("__watchedEvents",this);i||(i=[],setState({__watchedEvents:i},this)),n.context=n.context||this,i.push(n);var r=getTarget(n.target,this);if(this.isMounted()&&r&&r[n.type](n.event,n.callback,n.context),"off"===e)for(var o,c=0;c<i.length;c++)o=i[c],o.event===t.event&&o.callback===t.callback&&getTarget(o.target,this)===r&&i.splice(c,1)}function _watchedEventsBindAll(e){var t=getState("__watchedEvents",e);if(t){var n;for(var a in t)if(t.hasOwnProperty(a)){n=t[a];var i=getTarget(n.target,e);i&&i[n.type](n.event,n.callback,n.context)}}}function _watchedEventsUnbindAll(e,t){var n=getState("__watchedEvents",t);if(n){var a;for(var i in n)if(n.hasOwnProperty(i)){a=n[i];var r=getTarget(a.target,t);r&&r.off(a.event,a.callback,a.context)}e||setState({__watchedEvents:[]},t)}}function getTarget(e,t){return"function"==typeof e?e.call(t):e}function createHandler(event,callback,context,dontWrapCallback){if(!dontWrapCallback){var _callback=callback,noArg;if("object"==typeof callback&&(_callback=callback.callback.call(this)),"string"==typeof callback&&(noArg=noArgMethods.indexOf(callback)>=0,_callback=context[callback]),!_callback)throw'no callback function exists for "'+callback+'"';callback=function(){return _callback.apply(context,noArg?[]:arguments)}}var match=event.match(specialWrapper);if(match){var specialMethodName=match[1],args=eval("["+match[2]+"]"),rest=match[3],specialHandler=React.events.specials[specialMethodName];if(specialHandler)return 1===args.length&&""===args[0]&&(args=[]),callback=specialHandler.call(context,callback,args),createHandler(rest,callback,context,!0);throw new Error('invalid special event handler "'+specialMethodName+"'")}for(var parts=event.match(splitter),handlerName=parts[1],path=parts[2],handler=handlers[handlerName],i=0;!handler&&i<patternHandlers.length;i++)handlerName.match(patternHandlers[i].pattern)&&(handler=patternHandlers[i].handler);if(!handler)throw new Error('no handler registered for "'+event+'"');return handler.call(context,{key:handlerName,path:path},callback)}function registerObjectHandler(e,t){eventManager.handle(e,function(e,n){var a,i,r=e.path.match(splitter),o=r[1],c=r[2];return{on:function(){var e=t.call(this,o);e&&(i=e.state||e,e.on(c,n),a=e)},off:function(){a&&(a.off(c,n),a=void 0,i=void 0)},isStale:function(){if(!a)return!0;var e=t.call(this,o);return e&&(e.state||e)===i?void 0:!0}}})}function handleEvents(e,t,n){var a,i=getState("_eventHandlers",t)||[];e=normalizeEvents(e);for(var r in e)e.hasOwnProperty(r)&&(a=createHandler(r,e[r],t),a.initialize&&a.initialize.call(t),i.push(a),n&&t.isMounted()&&a.on.call(this));return i}var handlers={},patternHandlers=[],splitter=/^([^:]+):?(.*)/,specialWrapper=/^\*([^\(]+)\(([^)]*)\)[->:]*(.*)/,noArgMethods=["forceUpdate"],setState=React.mixins.setState,getState=React.mixins.getState,namespace="react-events.",handlerTemplates={standard:function(e){var t={on:e.onKey||"on",off:e.offKey||"off"},n=e.target;return function(a,i){function r(e,a){return function(){var r="function"==typeof n?n.call(a,o):n;r&&r[t[e]](o,i)}}var o=a.path;return{on:r("on",this),off:r("off",this),initialize:e.initialize}}}},eventManager=React.events={specials:{},handle:function(e,t){"function"!=typeof t&&(t=handlerTemplates[t.type||"standard"](t)),e instanceof RegExp?patternHandlers.push({pattern:e,handler:t}):handlers[e]=t}};"undefined"!=typeof window&&eventManager.handle("window",{target:window,onKey:"addEventListener",offKey:"removeEventListener"});var objectHandlers={ref:function(e){return this.refs[e]},prop:function(e){return this.props[e]}};for(var key in objectHandlers)objectHandlers.hasOwnProperty(key)&&registerObjectHandler(key,objectHandlers[key]);eventManager.handle("repeat",function(e,t){var n,a=parseInt(e.path,10);return{on:function(){n=setInterval(t,a)},off:function(){n=!!clearInterval(n)}}}),eventManager.handle("!repeat",function(e,t){function n(e){e!==!0&&t(),setTimeout(function(){a&&requestAnimationFrame(n)},i)}var a,i=parseInt(e.path,10);return{on:function(){a=!0,n(!0)},off:function(){a=!1}}}),React.mixins.add(namespace+"events",function(){function e(e,t){return function(){e.apply(t,arguments)}}var t=[{triggerWith:function(){var e=Array.prototype.slice.call(arguments),t=this;return"string"!=typeof e[0]&&(t=e[0],e.splice(0,1)),function(){t.trigger.apply(t,e)}},callWith:function(e){var t=Array.prototype.slice.call(arguments,1),n=this;return function(){e.apply(n,t)}},manageEvents:function(e){setState({_eventHandlers:handleEvents(e,this,!0)},this)},getInitialState:function(){return{_eventHandlers:handleEvents(this.events,this)}},componentDidUpdate:function(){for(var e,t=getState("_eventHandlers",this),n=0;n<t.length;n++)e=t[n],e.isStale&&e.isStale.call(this)&&(e.off.call(this),e.on.call(this))},componentDidMount:function(){for(var e=getState("_eventHandlers",this),t=0;t<e.length;t++)e[t].on.call(this)},componentWillUnmount:function(){for(var e=getState("_eventHandlers",this),t=0;t<e.length;t++)e[t].off.call(this)}}],n=eventManager.mixin;if(n){for(var a,i={},r={},o=["on","once","off","trigger"],c=0;c<o.length;c++)a=o[c],n[a]&&(i[a]=e(n[a],r));i.getInitialState=function(){return{__events:r}},t.push(i)}return t},"state"),React.mixins.add(namespace+"listen",{componentDidMount:function(){_watchedEventsUnbindAll(!0,this),_watchedEventsBindAll(this)},componentWillUnmount:function(){_watchedEventsUnbindAll(!0,this)},listenTo:function(e,t,n,a){var i=t?{event:t,callback:n,target:e,context:a}:e;manageEvent.call(this,"on",i)},listenToOnce:function(e,t,n,a){var i={event:t,callback:n,target:e,context:a};manageEvent.call(this,"once",i)},stopListening:function(e,t,n,a){var i={event:t,callback:n,target:e,context:a};manageEvent.call(this,"off",i)}})}(),function(){function e(){var e=_.toArray(arguments);_.isString(e)?e[0]=x+e[0]:e.name=x+e.name,React.mixins.add.apply(React.mixins,e)}function t(e){return e.getModel?e.getModel():void 0}function n(e,t,n,a){return"collection"===e?t.getCollection(n,a):t.getModel(n,a)}function a(e){return e?_.isArray(e)?e:[e]:void 0}function i(e,t,a){return function(){return a?a:n(e,t)}}function r(e){return e.getModelKey?e.getModelKey():e.props.name||e.props.key||e.props.ref}function o(e,t){if(t&&t.modelIndexErrors)return t.modelIndexErrors(e);if(Array.isArray(e)){var n={};return _.each(e,function(e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])}),n}return e}function c(e,n){var a=t(e);if(a){var i=r(e);return n(i,a)}}function s(e,t,n,i,r){var o=t;_.isString(o)&&(o=a(n.props[o]));var c=_.isArray(o);if(_.each(o,function(t,a){c&&(a=t,t=void 0);var o;o=_.isString(i)?i.replace("{key}",a):i(a),n[e+E](o,_.bind(r,{key:a,value:t}),this)},this),!o&&_.isFunction(i)){var s=i(void 0);s&&n[e+E](s,_.bind(r,{}),this)}return o}function l(e,t,a,i,r){function o(e){i["on"===t?"listenTo":"listenToOnce"](e,s,l,u)}var c=d(e,i),s=a[0],l=a[1],u=a[2];c[s]={type:t,ev:s,cb:l,ctx:u},c.__bound&&(r?o(r):n(e,i,o))}function u(e){function t(e,t){o&&e===t||(o&&e&&(i.trigger(a+":unbind",t),_.each(r,function(t){t&&t!==!0&&this.stopListening(e,t.ev,t.cb,t.ctx)},i)),t&&(i.trigger(a+":bind",t),_.each(r,function(e){e&&e!==!0&&l(a,e.type,[e.ev,e.cb,e.ctx],this,t)},i)))}var a=e.type,i=e.context,r=d(a,i),o=r.__bound;r.__bound=!0,n(a,i,function(e,n){var i=this.props[n];t(i,e),i!==e&&i&&this.trigger(a+":set",e,n,i)},e.props||i.props)}function d(e,t){var n="__"+e+S,a=w(n,t);if(!a){a={};var i={};i[n]=a,A(i,t)}return a}function f(e,t,n,a){var i=w(t,a),r=i&&i.length;if(i||(i=[]),_.isArray(i)){if(i.push(e),!r){var o={};o[t]=i,A(o,a)}e.on("complete",function(){h(e,t,n,a)})}}function h(e,t,n,a){var i=w(t,a);if(_.isArray(i)){for(var r=i.indexOf(e);r>=0;)i.splice(r,1),r=i.indexOf(e);if(!i.length){var o={};o[t]=void 0,A(o,a)}}}function p(e,t,n,a){var i=n[k];i&&_.each(i,function(i){e&&e!==R&&i.method!==e||f(i,t,n,a)})}function v(e){return e.getDOMNode()}function m(e){return v(e).value}function g(e,t,n,a){for(var i=e.getDOMNode(),r=i.getElementsByTagName(t),o=[],c=0;c<r.length;c++)r[c][n]===a&&o.push(r[c]);return o}function y(e){var t=e.props,n=t.bind;if(n&&"false"!==n){var a=_.isString(n)||n===!0?{twoWayBinding:!0}:n;return function(t){var n=e.getModel(),i=r(e),o={};if(o[i]=e.getValue(),n&&i)if(a.validateField){var c=n.validate(o,a);c?n.trigger("invalid",n,c,_.extend(a,{validationError:c})):n.set(o,a)}else n.set(o,a);e.props.onChange&&e.props.onChange(t)}}return t.onChange}var x="react-backbone.",b=Backbone.xhrEventName,k=Backbone.xhrModelLoadingAttribute,w=React.mixins.getState,A=React.mixins.setState,M=React.reactBackboneDebugWarnings,O="loading",E="On",S="Events",R="all";_.isUndefined(M)&&(M=!0),React.events.mixin=React.events.mixin||Backbone.Events,React.mixins.getModelKey=r,React.mixins.modelIndexErrors=o,Backbone.input=Backbone.input||{};var B=Backbone.input.getModelValue=function(e){return c(e,function(e,t){return t.get(e)})};Backbone.input.setModelValue=function(e,t,n){return c(e,function(e,a){return a.set(e,t,n)})},_.each([{type:"model",defaultParams:[["model"]],capType:"Model",changeEvents:["change"],cachedKey:"__cachedModels"},{type:"collection",defaultParams:[["collection"]],capType:"Collection",changeEvents:["change","add","remove","reset","sort"],cachedKey:"__cachedCollections"}],function(t){var a="get"+t.capType,r=function(e){var n={getInitialState:function(){return{}},componentWillReceiveProps:function(){this.state[t.cachedKey]=void 0}};return n[a]=function(n,a){var i=!a&&this.state&&this.state[t.cachedKey];if(!i){i={};var r=e,o=!!a;a=a||this.props,r&&0!==r.length||(r=t.defaultParams);for(var c,s=0;s<r.length;s++){c=r[s];for(var l=0;l<c.length;l++){var u=c[l],d=w(u,this)||a[u];d?i[u]=d:o&&n&&u&&n.call(this,void 0,u)}}!o&&this.state&&(this.state[t.cachedKey]=i)}var f;return _.each(i,function(e,t){f=f||e,n&&n.call(this,e,t)},this),f},n};e({name:t.type+"Aware",initiatedOnce:!0},r,"state");var o={getInitialState:function(){return n(t.type,this,function(e,t){(M&&!e.off||!e.on)&&(console.error("props."+t+" does not implement on/off functions - you will see event binding problems (object logged to console below)"),console.log(e))}),null},componentWillReceiveProps:function(e){u({context:this,props:e,type:t.type})},componentDidMount:function(){u({context:this,type:t.type})}};o[t.type+E]=function(){l(t.type,"on",arguments,this)},o[t.type+"Once"]=function(){l(t.type,"once",arguments,this)},o[t.type+"Off"]=function(e,n,a,r){var o=d(t.type,this);delete o[e],this.stopListening(i(t.type,this,r),e,n,a)},e(t.type+S,o,t.type+"Aware","listen","events");var c={getInitialState:function(){_.each(t.changeEvents,function(e){this[t.type+E](e,function(e,t){t&&t.twoWayBinding||this.deferUpdate()},this)},this)}};e(t.type+"ChangeAware",c,t.type+S,"listen","events","deferUpdate");var h={getInitialState:function(){function e(e){e.whenFetched(function(){})}this.on(t.type+":bind",e),this["get"+t.capType](e)}};e(t.type+"Fetch",h,t.type+S);var v={getInitialState:function(e,n){function a(e){"collection"===t.type&&e.model instanceof Backbone.Model||f(e,this.value||O,e.model,n)}var i=function(e){return e&&e!==R?b+":"+e:b};return s(t.type,e,n,i,a),null},componentDidMount:function(e,a){function i(t){e?_.each(r,function(e,n){o&&(n=e,e=O),p(n,e,t,a)}):p(R,O,t,a)}var r=e;_.isString(r)&&(r=[r]);var o=_.isArray(e);n(t.type,a,function(e){i(e)}),a.on(t.type+":set",function(e){i(e)})}},m=function(){var e;return 0===arguments.length?e=void 0:1===arguments.length&&(e=arguments[0]),{getInitialState:function(){return v.getInitialState(e,this)},componentDidMount:function(){return v.componentDidMount(e,this)}}};e(t.type+"XHRAware",m,t.type+S);var g=function(){var e=arguments.length>0?Array.prototype.slice.call(arguments,0):void 0;return{getInitialState:function(){return v.getInitialState(e||"loadOn",this)},componentDidMount:function(){return v.componentDidMount(e||"loadOn",this)}}};e(t.type+"LoadOn",g,t.type+S);var y=function(){var e=arguments.length>0?Array.prototype.slice.call(arguments,0):void 0;return{getInitialState:function(){var n=this;s(t.type,e||"updateOn",this,"{key}",function(){n.deferUpdate()})}}};e(t.type+"UpdateOn",y,t.type+S,"deferUpdate");var x=new RegExp("^"+t.type+"(\\[.+\\])?$");React.events.handle(x,function(e,n){return{on:function(){if(!this[t.type+E])throw new Error("use the "+t.type+' "Events" mixin instead of "events"');this[t.type+E](e.path,n)},off:function(){}}})}),_.each(["XHRAware","ChangeAware","LoadOn","UpdateOn"],function(e){React.mixins.alias("backbone"+e,"model"+e,"collection"+e)}),e("modelPopulate",{modelPopulate:function(){var e,n,a,i,o;_.each(arguments,function(t){t instanceof Backbone.Model?i=t:_.isBoolean(t)?(o=!0,i=!1):_.isArray(t)?e=t:_.isFunction(t)?n=t:a=t}),_.isUndefined(i)&&(i=t(this));var c={};return e||(e=_.map(this.refs,function(e){return e})),_.each(e,function(e){if(e.getValue){var n=r(e);if(n){var s=e.getValue();c[n]=s}}else if(e.modelPopulate&&e.getModels){if(!i&&!o)return;var l=t(e),u=i||a&&a.populateModel;if(l===u){var d=e.modelPopulate(_.extend({populateModel:u},a),!0);_.defaults(c,d)}}}),i&&(i.set(c,{validate:!0})?n&&n.call(this,i):a&&a.onInvalid&&a.onInvalid.call(this,c)),c}},"modelAware"),e("loadWhile",{loadWhile:function(e){function t(t){var a=e[t];e[t]=function(){var e={};e[O]=void 0,A(e,n),a&&a.apply(this,arguments)}}e=e||{};var n=this;t("error"),t("success");var a={};return a[O]=[],A(a,this),e}}),e("modelValidator",{modelValidate:function(e,n){var a=t(this);return a&&a.validate?o(a.validate(e,n),this)||!1:void 0}},"modelAware"),e("modelInvalidAware",{getInitialState:function(){var e=r(this);return e&&(this.modelOn("invalid",function(t,n){var a=o(n,this)||{},i=a&&a[e];i&&A({invalid:i},this)}),this.modelOn("change:"+e,function(){A({invalid:void 0},this)})),null}},"modelEvents");var I=React.events.specials;if(I){var T=["memoize","delay","defer","throttle","debounce","once","after","before"];_.each(T,function(e){I[e]=I[e]||function(t,n){return n.splice(0,0,t),_[e].apply(_,n)}})}var U=function(e,t,n,a){return React.createClass(_.extend({mixins:["modelAware"],render:function(){var a={},i=B(this);return n?a.defaultChecked=i:a.defaultValue=i,React.DOM[e](_.extend(a,t,this.props,{onChange:y(this)}),this.props.children)},getValue:function(){if(this.isMounted()){if(n){var e=this.getDOMNode();return e.checked&&(e.value||!0)||!1}return m(this)}},getDOMValue:function(){return this.isMounted()?m(this):void 0}},a))};Backbone.input=Backbone.input||{},_.defaults(Backbone.input,{Text:U("input",{type:"text"}),TextArea:U("textarea"),Select:U("select",void 0,void 0),CheckBox:U("input",{type:"checkbox"},!0),RadioGroup:React.createClass({mixins:["modelAware"],render:function(){var e=_.clone(this.props);return e.ref="input",React.DOM[e.tag||"span"](e,e.children)},componentDidMount:function(){var e=B(this);if(e){var t=g(this,"input","value",e.replace('"','\\"'))[0];t&&(t.checked="checked")}this.state||(this.state={});var n=this.state.changeHandler=y(this);n&&v(this).addEventListener("change",n)},componentWillUnmount:function(){var e=this.state&&this.state.changeHandler;e&&v(this).removeEventListener("change",e)},getValue:function(){if(this.isMounted())for(var e=g(this,"input","type","radio"),t=0;t<e.length;t++)if(e[t].checked)return e[t].value},getDOMValue:function(){return this.isMounted()?m(this):void 0}})})}()});